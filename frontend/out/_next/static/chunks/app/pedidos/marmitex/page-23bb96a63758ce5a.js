(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[786],{7710:function(e,a,t){Promise.resolve().then(t.bind(t,4839))},4839:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return p}});var s=t(7437),o=t(6932),l=t(5113),n=t(9973),r=t(2439),i=t(4613),c=t(2265),d=t(9413),u=function(){let{idCliente:e}=(0,i.l)(),[a,t]=(0,c.useState)([]),[,o]=(0,c.useState)(""),[l,n]=(0,c.useState)([]),[r,u]=(0,c.useState)(0),[p,m]=(0,c.useState)(null),[h,x]=(0,c.useState)(""),j=new Date(Date.now()),v=String(j.getDate()).padStart(2,"0"),f=String(j.getMonth()+1).padStart(2,"0"),_=j.getFullYear(),b="".concat(_,"-").concat(f,"-").concat(v);async function g(){try{let e=await d.f.get("/servicos_diversos/lista_ofertas");t(e.data)}catch(e){console.error("Erro ao buscar clientes:",e)}}(0,c.useEffect)(()=>{g()},[]);let N=e=>{u(e.reduce((e,a)=>e+parseFloat("".concat(a.valor)),0))},S=e=>{let a=l.filter((a,t)=>t!==e);n(a),N(a)},C=async()=>{try{let a=await d.f.post("/pedidos/cadastro_marmitex",{id_cliente:e,segmento:"Marmitex",situacao:"em preparo",situacaof:"a pagar",valor:r,observacao:h,dia:b,entrega:b,pedido:l.map(e=>e.nome_prato)});console.log("Pedido enviado:",a.data),o(""),n([]),u(0),m(null),x("")}catch(e){console.error("Erro ao enviar pedido:",e)}};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"clientes",children:[(0,s.jsxs)("div",{className:"dados_pedidos",children:[(0,s.jsxs)("section",{className:"disponivel",children:[(0,s.jsx)("label",{htmlFor:"",id:"cardapio",className:"labels",children:"Pratos Ofertados"}),(0,s.jsx)("textarea",{id:"categoria1",className:"inputs",readOnly:!0,value:a.map(e=>"".concat(e.nome_prato,"            R$").concat(e.valor)).join("\n")})]}),(0,s.jsxs)("section",{className:"pedido",children:[(0,s.jsx)("label",{htmlFor:"",id:"pedir",className:"labels",children:"Pedido do Cliente"}),(0,s.jsxs)("select",{name:"",id:"categoria2",className:"inputs",onChange:e=>m(e.target.value),children:[(0,s.jsx)("option",{value:"0A",children:"Escolha o prato pedido pelo cliente"}),a.map(e=>(0,s.jsx)("option",{value:e.nome_prato,children:"".concat(e.nome_prato)},e.nome_prato))]}),(0,s.jsx)("button",{id:"bp",onClick:()=>{if(p){let e=a.find(e=>e.nome_prato===p);if(e){let a=[...l,e];n(a),N(a)}}},children:"Incluir"}),(0,s.jsx)("select",{name:"",id:"detalhes",className:"inputs",size:5,multiple:!0,onChange:e=>o(e.target.value),onDoubleClick:e=>{let a=e.currentTarget.selectedIndex;a>=0&&S(a)},children:l.map(e=>(0,s.jsx)("option",{value:e.nome_prato,children:"".concat(e.nome_prato," ")},e.nome_prato))}),(0,s.jsx)("label",{htmlFor:"",id:"total",className:"labels",children:"Valor Total"}),(0,s.jsx)("input",{type:"text",id:"valor1",className:"inputs",value:" R$ ".concat(r.toFixed(2)),readOnly:!0}),(0,s.jsx)("label",{htmlFor:"",id:"obs_pedido",className:"labels",children:"Observa\xe7\xf5es do Pedido"}),(0,s.jsx)("textarea",{name:"",id:"observa",className:"inputs",value:h,onChange:e=>x(e.target.value)}),(0,s.jsx)("button",{id:"botao_cad2",onClick:C,children:"Processar"})]})]}),(0,s.jsx)("div",{})]})})},p=function(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(i.H,{children:[(0,s.jsx)(r.default,{}),(0,s.jsx)(n.default,{}),(0,s.jsx)(o.default,{}),(0,s.jsx)(l.Z,{}),(0,s.jsx)("h1",{id:"servico_pedidos",children:"Pedidos Marmitex"}),(0,s.jsx)(u,{})]})})}}},function(e){e.O(0,[785,464,716,971,117,744],function(){return e(e.s=7710)}),_N_E=e.O()}]);